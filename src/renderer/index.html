<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>🎀 Cute Secure Messenger</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎀 Cute Secure Messenger</h1>
            <p>Whisper secrets with your friends 💖</p>
        </header>

        <div class="key-status">
            <span id="keyStatus">✨ Loading your keys...</span>
            <div class="key-actions">
                <button id="exportKeyBtn" class="btn-secondary">📥 Export My Key</button>
                <button id="importKeyBtn" class="btn-secondary">📤 Import Friend's Key</button>
                <button id="resetKeyBtn" class="btn-danger">🔄 Reset My Key</button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="encrypt">💌 Send Message</button>
            <button class="tab-btn" data-tab="decrypt">📩 Receive Message</button>
            <button class="tab-btn" data-tab="contacts">👥 Friends</button>
        </div>

        <div class="tab-content">
            <!-- Encrypt Tab -->
            <div id="encrypt-tab" class="tab-pane active">
                <div class="input-group">
                    <label for="recipientSelect">👩‍❤️‍👨 Send to Friends:</label>
                    <div class="recipient-selection">
                        <select id="recipientSelect" class="contact-select" multiple size="4">
                            <!-- Options will be populated by JS -->
                        </select>
                        <div class="selection-info">Hold Ctrl/Cmd to select multiple friends</div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="encryptInput">💌 Your Secret Message:</label>
                    <textarea id="encryptInput" placeholder="Type your secret message here... 💭"></textarea>
                </div>
                
                <div class="actions">
                    <button id="encryptBtn" class="btn-primary">✨ Send Securely</button>
                    <button id="saveEncryptBtn" class="btn-secondary">💾 Save All</button>
                    <button id="copyAllBtn" class="btn-secondary">📋 Copy All Messages</button>
                </div>
                
                <div class="result">
                    <label>🔒 Encrypted Messages:</label>
                    <div id="multiEncryptResults" class="multi-results">
                        <p class="no-results">Encrypt a message to see results here... 🔐</p>
                    </div>
                </div>
            </div>

            <!-- Decrypt Tab -->
            <div id="decrypt-tab" class="tab-pane">
                <div class="input-group">
                    <label for="decryptInput">📩 Encrypted Message:</label>
                    <textarea id="decryptInput" placeholder="Paste the encrypted message here... 🔐"></textarea>
                </div>
                
                <div class="actions">
                    <button id="decryptBtn" class="btn-primary">💫 Decrypt Message</button>
                    <button id="copyDecryptBtn" class="btn-secondary">📋 Copy Result</button>
                </div>
                
                <div class="result decrypt-result">
                    <label>💌 Decrypted Message:</label>
                    <textarea id="decryptOutput" placeholder="Your decrypted message will appear here... 💖"></textarea>
                </div>
            </div>

            <!-- Contacts Tab -->
            <div id="contacts-tab" class="tab-pane">
                <div class="input-group">
                    <label for="newContactName">👩‍❤️‍👨 Add New Friend:</label>
                    <div class="add-contact-form">
                        <input type="text" id="newContactName" placeholder="Enter friend's name...">
                        <input type="text" id="newContactKey" placeholder="Paste their key (optional for manual add)...">
                        <button id="addContactFormBtn" class="btn-primary">➕ Add Friend</button>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>🔑 Your Public Key (Share this with friends):</label>
                    <div class="key-display">
                        <textarea id="myPublicKey" readonly></textarea>
                        <button id="copyKeyBtn" class="btn-secondary">📋 Copy Key</button>
                    </div>
                </div>
                
                <div class="contacts-list">
                    <h3>👭 Your Friends List:</h3>
                    <div id="contactsContainer" class="contacts-container">
                        <p class="no-contacts">No friends added yet! Add your first friend above 💕</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Key Modal -->
        <div id="exportModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>📥 Export Your Key Securely</h2>
                <p>Create an encrypted file to share your key with friends</p>
                <div class="input-group">
                    <label for="exportPassword">🔒 Password for encryption:</label>
                    <input type="password" id="exportPassword" placeholder="Enter a strong password...">
                </div>
                <div class="input-group">
                    <label for="exportConfirmPassword">🔒 Confirm Password:</label>
                    <input type="password" id="exportConfirmPassword" placeholder="Confirm your password...">
                </div>
                <button id="exportKeyFileBtn" class="btn-primary">💾 Save Encrypted Key File</button>
            </div>
        </div>

        <!-- Import Key Modal -->
        <div id="importModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>📤 Import Friend's Encrypted Key</h2>
                <p>Add a friend by importing their encrypted key file</p>
                <div class="input-group">
                    <label for="importContactName">👩‍❤️‍👨 Friend's Name:</label>
                    <input type="text" id="importContactName" placeholder="Enter the name you want to use for this friend...">
                </div>
                <div class="input-group">
                    <label for="importPassword">🔒 Password to decrypt:</label>
                    <input type="password" id="importPassword" placeholder="Enter password from your friend...">
                </div>
                <button id="loadKeyFileBtn" class="btn-primary">📂 Load Encrypted Key File</button>
                <div id="importStatus" class="import-status"></div>
            </div>
        </div>

        <div id="message" class="message"></div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>